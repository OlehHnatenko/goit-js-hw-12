{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios  from \"axios\";\n\nconst API_KEY = \"50611483-a84caa89bfe2ebe23d067e8bc\";\nconst URL = \"https://pixabay.com/api/\";\n\nconst searchParam = new URLSearchParams(\n    {key: API_KEY, q: null, image_type: \"photo\", orientation: \"horizontal\", safesearch: true, page: 1, per_page: 15 });\n\n\nexport const getImagesByQuery = async (query, page) => {\n\n\n    \n    searchParam.set(\"q\", query);\n    searchParam.set(\"page\", page);\n    \n    const {data} = await axios(URL + \"?\" + searchParam);\n    return data;\n    \n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { gallery, loader, loadMore } from \"../main\";\n\nconst modal = new SimpleLightbox('.gallery-item a');\n\nexport function createGallery (images) {\n    const markup = images\n    .map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>\n        `<li class=\"gallery-item\">\n    <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"/> \n    <ul>\n      <li>\n        <p>Likes<span>${likes }</span></p>\n      </li>\n      <li>\n        <p>Views<span>${views}</span></p>\n      </li>\n      <li>\n        <p>Comments<span>${comments}</span></p>\n      </li>\n      <li>\n        <p>Downloads<span>${downloads}</span></p>\n      </li>\n    </ul>\n    </a>\n    \n    \n    </li>`).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    modal.refresh();\n}\n\n\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"is-hidden\");\n\n    \n\n}\nexport function showLoadMoreButton() {\n  loadMore.classList.remove(\"is-hidden\");\n\n}\n\nexport function hideLoadMoreButton() {\n  loadMore.classList.add(\"is-hidden\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, showLoader, showLoadMoreButton } from \"./js/render-functions\";\n\n\n\nexport const gallery = document.querySelector(\".gallery\");\nexport const loader = document.querySelector(\".loader\");\nexport const loadMore = document.querySelector(\".load-more\");\n\nlet currentPage = 1;\nlet query = \"\";\nlet firstCard;\n\nconst form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", onSubmit);\nloadMore.addEventListener(\"click\", onLoadMore);\n\n\n\nasync function onSubmit(evt) {\n    evt.preventDefault();\n\n    try {\n         const input = evt.currentTarget.elements.search.value.trim();\n    if(input === \"\") {\n        iziToast.warning({message: \"WARNING\", position: \"topRight\"});\n        return;\n        \n    }\n    currentPage = 1;\n    query = input;\n    showLoader();\n    clearGallery();\n    hideLoadMoreButton();\n\n        \n        const data = await getImagesByQuery(query, currentPage); \n        if(data.hits.length === 0) {\n            iziToast.warning({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\"\n            });\n            return;\n        }\n        createGallery(data.hits);\n        form.reset();\n        if(data.totalHits > 15) {\n            showLoadMoreButton();\n            \n\n        }else{\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n        }\n\n        firstCard = gallery.firstElementChild;\n        scrollSmooth(firstCard);\n\n    \n        \n    } catch (error) {iziToast.error({\n        message: error.message,\n        position: \"topRight\"\n    })\n        \n    } finally {hideLoader()}\n\n   \n    \n\n\n}\n\nasync function onLoadMore() {\n    try {\n        currentPage += 1;\n        showLoader();\n        const data = await getImagesByQuery(query, currentPage);\n        createGallery(data.hits);\n        scrollSmooth(firstCard);\n\n        if(Math.ceil(data.totalHits / 15) === currentPage) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\"\n            });\n            \n        }\n\n        \n    } catch (error) {\n        iziToast.error({\n        message: error.message,\n        position: \"topRight\"\n    })\n        \n    } finally {hideLoader()}\n    \n}\n\nfunction scrollSmooth(element) {\n    const {height} = element.getBoundingClientRect();\n    \n    \n    window.scrollBy({\n  top: height * 2,\n  \n  behavior: \"smooth\",\n});\n\n}\n\n\n\n\n\n\n\n"],"names":["API_KEY","URL","searchParam","getImagesByQuery","query","page","data","axios","modal","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","loadMore","hideLoadMoreButton","currentPage","firstCard","form","onSubmit","onLoadMore","evt","input","iziToast","scrollSmooth","error","element","height"],"mappings":"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"}